{
  "id": "tower-defense-v1",
  "name": "Tower Defense Kit",
  "type": "tower-defense",
  "version": "1.0.0",
  "author": "GameForge Template",
  "description": "Full-featured 2D tower defense template: towers, enemies, waves, pathfinding, projectile & collision systems, upgrades, economy, UI, audio, analytics, persistence, editor metadata and demo scenes. Built to extend into arcade or strategy styles.",
  "createdAt": "2025-09-19T00:00:00Z",
  "compat": { "engine": "GameForge-Editor", "minEditorVersion": "0.6.0" },
  "paths": {
    "self": "/templates/tower_defense.json",
    "cover": "/assets/templates/covers/tower-defense-cover.png",
    "thumbnail": "/assets/templates/thumbs/tower-defense-thumb.png",
    "spriteDir": "/assets/sprites/towerdef",
    "audioDir": "/assets/audio/towerdef",
    "tilemapDir": "/assets/tilemaps/towerdef"
  },
  "tags": ["tower-defense", "strategy", "towers", "waves", "pathfinding", "ai"],
  "uiCard": {
    "title": "Tower Defense Kit",
    "subtitle": "Defend the path: towers, waves, upgrades and economy.",
    "thumbnail": "/assets/templates/thumbs/tower-defense-thumb.png",
    "cover": "/assets/templates/covers/tower-defense-cover.png",
    "badges": ["Waves", "Upgrades", "Pathfinding"],
    "buttons": [
      { "id": "preview", "label": "Preview", "kind": "primary", "action": { "type": "open-preview", "payload": { "templateSource": "/templates/tower_defense.json" } } },
      { "id": "edit", "label": "Edit", "kind": "accent", "action": { "type": "open-editor", "payload": { "templateSource": "/templates/tower_defense.json", "hash": "tower-defense-v1" } } },
      { "id": "download", "label": "Download", "kind": "ghost", "action": { "type": "download", "payload": { "href": "/templates/tower_defense.json", "filename": "tower_defense.json" } } }
    ]
  },
  "settings": {
    "canvasWidth": 1280,
    "canvasHeight": 720,
    "backgroundColor": "#0f1724",
    "grid": { "enabled": true, "size": 32, "snap": true },
    "physics": { "useContinuousCollision": false, "collisionIterations": 4, "maxDeltaMs": 33 },
    "performance": { "targetFPS": 60, "lowSpecMode": { "maxParticles": 0 } },
    "platformTargets": ["web", "desktop", "mobile"]
  },
  "editor": {
    "tools": { "select": true, "move": true, "scale": true, "tilemap": true, "pathEdit": true, "playtest": true },
    "panels": { "hierarchy": true, "inspector": true, "assets": true, "waves": true, "console": true },
    "shortcuts": { "playPause": ["Space"], "snapToggle": ["G"], "openWaves": ["W"] },
    "importRules": { "imageExt": [".png", ".jpg", ".webp"], "audioExt": [".mp3", ".wav", ".ogg"], "maxImageSizeMB": 12 }
  },
  "assets": {
    "images": [
      { "id": "map-tileset", "path": "/assets/tilemaps/towerdef/tileset.png", "preload": true },
      { "id": "tower-basic", "path": "/assets/sprites/towerdef/tower-basic.png", "preload": true },
      { "id": "tower-slow", "path": "/assets/sprites/towerdef/tower-slow.png", "preload": false },
      { "id": "enemy-grunt", "path": "/assets/sprites/towerdef/enemy-grunt.png", "preload": true },
      { "id": "enemy-fast", "path": "/assets/sprites/towerdef/enemy-fast.png", "preload": false },
      { "id": "projectile-bullet", "path": "/assets/sprites/towerdef/proj-bullet.png", "preload": false },
      { "id": "projectile-slow", "path": "/assets/sprites/towerdef/proj-slow.png", "preload": false }
    ],
    "audio": [
      { "id": "sfx-place", "path": "/assets/audio/towerdef/place.wav", "preload": true },
      { "id": "sfx-shoot", "path": "/assets/audio/towerdef/shoot.wav", "preload": true },
      { "id": "sfx-hit", "path": "/assets/audio/towerdef/hit.wav", "preload": true },
      { "id": "sfx-wave-start", "path": "/assets/audio/towerdef/wave_start.mp3", "preload": false },
      { "id": "music-loop", "path": "/assets/audio/towerdef/music-loop.mp3", "preload": false }
    ],
    "fonts": [{ "id": "ui-font", "family": "Orbitron, sans-serif" }]
  },
  "input": {
    "actions": [
      { "id": "placeTower", "keys": ["KeyP", "Enter"], "mobile": ["tap"] },
      { "id": "sellTower", "keys": ["KeyS"], "mobile": ["long_press"] },
      { "id": "upgradeTower", "keys": ["KeyU"], "mobile": ["double_tap"] }
    ],
    "touch": { "joystick": { "enabled": false }, "actionButtons": { "enabled": true, "buttons": ["placeTower", "upgradeTower", "sellTower"] } }
  },
  "economy": {
    "startCredits": 200,
    "incomePerWave": 25,
    "creditGainOnKill": true,
    "killReward": 5,
    "sellRefundRatio": 0.75,
    "maxCredits": 9999
  },
  "pathfinding": {
    "navGridSize": 32,
    "allowDynamicObstacles": true,
    "repathOnPlace": true,
    "pathSmoothing": true,
    "aiAvoidanceRadius": 12
  },
  "towers": {
    "templates": [
      {
        "id": "tower-basic",
        "name": "Basic Tower",
        "cost": 50,
        "buildTimeMs": 600,
        "range": 160,
        "fireRate": 600,
        "projectile": "proj-bullet",
        "damage": 12,
        "areaOfEffect": 0,
        "targeting": ["first", "closest", "strongest"],
        "upgrades": [
          { "id": "basic-dmg-1", "label": "Damage +10", "cost": 40, "apply": { "damage": 10 } },
          { "id": "basic-rate-1", "label": "Fire Rate +15%", "cost": 60, "apply": { "fireRateMult": 0.85 } }
        ],
        "tags": ["starter"]
      },
      {
        "id": "tower-slow",
        "name": "Frost Tower",
        "cost": 80,
        "buildTimeMs": 800,
        "range": 140,
        "fireRate": 1000,
        "projectile": "proj-slow",
        "damage": 6,
        "slowEffect": { "slowPercent": 0.45, "durationMs": 1200 },
        "areaOfEffect": 0,
        "targeting": ["closest", "first"],
        "upgrades": [
          { "id": "slow-range-1", "label": "Range +20", "cost": 50, "apply": { "range": 20 } },
          { "id": "slow-duration-1", "label": "Slow +10%", "cost": 70, "apply": { "slowPercentDelta": 0.1 } }
        ],
        "tags": ["crowd-control"]
      }
    ],
    "placementRules": { "allowedLayers": ["buildable"], "snapToGrid": true, "minDistanceBetweenTowers": 8 }
  },
  "projectiles": {
    "templates": [
      {
        "id": "proj-bullet",
        "speed": 560,
        "lifetimeMs": 1600,
        "damage": 12,
        "homing": false,
        "collision": { "radius": 6, "onHit": "applyDamage" },
        "render": { "image": "projectile-bullet", "rotationToVelocity": true }
      },
      {
        "id": "proj-slow",
        "speed": 380,
        "lifetimeMs": 2000,
        "damage": 6,
        "homing": false,
        "collision": { "radius": 8, "onHit": "applyDamageAndSlow" },
        "render": { "image": "projectile-slow" }
      }
    ]
  },
  "enemies": {
    "templates": [
      {
        "id": "enemy-grunt",
        "name": "Grunt",
        "hp": 40,
        "speed": 80,
        "armor": 0,
        "reward": 6,
        "size": { "width": 32, "height": 32 },
        "pathPriority": 1,
        "tags": ["ground", "basic"]
      },
      {
        "id": "enemy-fast",
        "name": "Runner",
        "hp": 22,
        "speed": 140,
        "armor": 0,
        "reward": 4,
        "size": { "width": 24, "height": 24 },
        "pathPriority": 2,
        "tags": ["ground", "fast"]
      },
      {
        "id": "enemy-tank",
        "name": "Tank",
        "hp": 220,
        "speed": 48,
        "armor": 8,
        "reward": 30,
        "size": { "width": 48, "height": 48 },
        "pathPriority": 0,
        "tags": ["ground", "armored"]
      }
    ],
    "spawnRules": { "spawnMarginPx": 16, "avoidSpawnOnTower": true }
  },
  "waves": {
    "waveSets": [
      {
        "id": "set-1",
        "name": "Starter Waves",
        "waves": [
          { "id": "w1", "spawn": [{ "enemy": "enemy-grunt", "count": 6, "intervalMs": 800 }] },
          { "id": "w2", "spawn": [{ "enemy": "enemy-grunt", "count": 8, "intervalMs": 700 }, { "enemy": "enemy-fast", "count": 4, "intervalMs": 900 }] },
          { "id": "w3", "spawn": [{ "enemy": "enemy-tank", "count": 1, "intervalMs": 0 }, { "enemy": "enemy-grunt", "count": 10, "intervalMs": 500 }] }
        ],
        "interWaveDelayMs": 6000,
        "startCreditsBonus": 20
      }
    ],
    "autoScaleDifficulty": { "enabled": true, "multPerWave": 1.06 }
  },
  "rules": {
    "maxLives": 20,
    "loseOnLivesZero": true,
    "winCondition": { "type": "surviveWaves", "waveSetId": "set-1" },
    "towerBuildCooldownMs": 150
  },
  "ui": {
    "hudElements": [
      { "id": "credits", "type": "text", "x": 12, "y": 12, "bind": "gameState.credits" },
      { "id": "lives", "type": "text", "x": 12, "y": 40, "bind": "gameState.lives" },
      { "id": "waveInfo", "type": "text", "x": 1100, "y": 12, "bind": "gameState.waveText" },
      { "id": "buildPanel", "type": "panel", "x": 12, "y": 560, "width": 1240, "height": 148 }
    ],
    "menus": { "main": ["Start", "Level Select", "Settings", "Exit"], "pause": ["Resume", "Restart", "Settings", "Quit"] },
    "theme": { "font": "ui-font", "primary": "#ffd166", "accent": "#06b6d4" }
  },
  "audio": {
    "music": "/assets/audio/towerdef/music-loop.mp3",
    "sfx": { "place": "sfx-place", "shoot": "sfx-shoot", "hit": "sfx-hit", "waveStart": "sfx-wave-start" },
    "volume": { "music": 0.6, "sfx": 1.0, "master": 1.0 }
  },
  "gameState": {
    "credits": 200,
    "lives": 20,
    "currentWaveIndex": 0,
    "currentWaveId": null,
    "enemiesAlive": 0,
    "towersPlaced": [],
    "score": 0,
    "waveText": "Wave 0 / 0",
    "paused": false
  },
  "systems": {
    "initializers": ["applySettings", "mountAssets", "setupPathfinding", "createEntities", "setupInput", "loadWaves", "spawnDemoScene"],
    "runtime": ["inputProcessing", "waveSpawner", "enemyAI", "pathfindingStep", "projectileStep", "collisionResolution", "applyDamage", "economyTick", "cameraUpdate", "animationTick", "renderFrame", "audioTick", "persistenceTick"],
    "shutdown": ["saveState", "unmountAssets"]
  },
  "persistence": {
    "saveSlots": 3,
    "autosaveIntervalSec": 30,
    "storageKeyPrefix": "gf_towerdef_v1_",
    "cloudSync": { "enabled": false, "provider": null }
  },
  "analytics": {
    "enabled": false,
    "events": ["gameStart", "waveStart", "waveEnd", "towerPlaced", "towerSold", "gameEnd"],
    "tags": { "template": "tower-defense-v1" }
  },
  "achievements": [
    { "id": "first_tower", "title": "First Tower", "desc": "Place your first tower.", "reward": { "credits": 25 } },
    { "id": "survivor", "title": "Wave Survivor", "desc": "Complete wave 3 without losing lives.", "reward": { "credits": 100 } },
    { "id": "no_damage", "title": "Impenetrable", "desc": "Finish a wave without any lives lost.", "reward": { "xp": 150 } }
  ],
  "network": {
    "multiplayer": { "enabled": false, "modes": ["co-op"], "placeholders": { "serverEndpoint": "https://api.example.com/match" } },
    "syncStrategy": { "authority": "server", "interpolationMs": 80, "predictionMs": 120 }
  },
  "ai": {
    "enemyAI": { "usePredictiveMovement": true, "retargetOnBlockedPath": true },
    "towerAI": { "targetPriority": ["closest", "first", "strongest"] }
  },
  "debugTools": { "showNavGrid": true, "showPaths": true, "showCollision": false, "showFPS": true },
  "localization": {
    "defaultLang": "en",
    "languages": ["en", "es", "pt", "fr", "hi"],
    "strings": {
      "en": {
        "start_wave": "Start Wave",
        "next_wave_in": "Next wave in",
        "place_tower": "Place Tower",
        "sell": "Sell",
        "upgrade": "Upgrade",
        "credits": "Credits",
        "lives": "Lives"
      }
    }
  },
  "demoScene": {
    "id": "demo-td-1",
    "name": "Path Demo",
    "layers": [{ "id": "bg", "z": 0 }, { "id": "world", "z": 1 }, { "id": "ui", "z": 2 }],
    "tilemap": { "id": "demo-map", "path": "/assets/tilemaps/towerdef/demo_map.json" },
    "navPaths": [
      { "id": "path-1", "points": [{ "x": 64, "y": 120 }, { "x": 300, "y": 120 }, { "x": 620, "y": 360 }, { "x": 1200, "y": 360 }] }
    ],
    "spawn": [
      { "type": "entity-ref", "layer": "world", "ref": "ground-tilemap" },
      { "type": "entity-ref", "layer": "world", "ref": "tower-basic" },
      { "type": "navspawn", "layer": "world", "pathRef": "path-1", "enemyRef": "enemy-grunt", "count": 3, "intervalMs": 900 }
    ],
    "camera": { "mode": "free", "zoom": 1.0 }
  },
  "versionHistory": [{ "version": "1.0.0", "date": "2025-09-19", "notes": "Initial tower defense kit." }],
  "notes": [
    "Wave balancing: adjust hp/speed and rewards for difficulty tuning.",
    "To add new tower types: add template in towers.templates and include assets.",
    "Pathfinding supports dynamic blocking (repath on tower placement) if pathfinding.repathOnPlace=true.",
    "For multiplayer co-op: enable network.multiplayer and implement server-side wave authority."
  ]
}

